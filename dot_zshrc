# shellcheck shell=bash
# zsh is mostly compatible with bash
#-----------------------------------------------------------------------------
# oh-my-zsh configuration
#-----------------------------------------------------------------------------
# Uncomment the following line to display red dots whilst waiting for completion.
# COMPLETION_WAITING_DOTS="true"

#-----------------------------------------------------------------------------
# antigen configuration
#-----------------------------------------------------------------------------
source "$HOME/antigen/antigen.zsh"

antigen use oh-my-zsh

antigen bundles <<EOBUNDLES
    colored-man-pages
    docker
    docker-compose
    docker-machine
    kubectl
    vscode
    unixorn/autoupdate-antigen.zshplugin
    zsh-users/zsh-autosuggestions
    zsh-users/zsh-completions
    zsh-users/zsh-syntax-highlighting
EOBUNDLES

antigen apply

#-----------------------------------------------------------------------------
# User configuration
#-----------------------------------------------------------------------------
source_highlight=/usr/share/source-highlight/src-hilite-lesspipe.sh
if [[ -x $source_highlight ]]; then
    export LESSOPEN="| $source_highlight %s"
fi
export LESS=' -R -M'

windows_terminal_keep_current_path() {
    if [[ -v WT_SESSION ]]; then
        printf "\e]9;9;%s\e\\" "$(wslpath -w "$PWD")"
    fi
}
precmd_functions+=(windows_terminal_keep_current_path)

eval "$(starship init zsh)"
